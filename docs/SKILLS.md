# Skills Reference

APDevFlow uses Claude Code skills from the **[claudeai-dev](https://github.com/prillcode/claudeai-dev)** repository.

---

## Overview

APDevFlow leverages existing, battle-tested Claude Code skills rather than reinventing the wheel. This provides several benefits:

- **Reusability** - Skills work independently of APDevFlow
- **Community** - Skills can be improved by the broader community
- **Flexibility** - Developers can use skills outside of APDevFlow
- **Maintenance** - Skills are maintained in their own repo with proper versioning

---

## Installation

### Automatic (Recommended - Future)

When the APDevFlow CLI is built, skills will be installed automatically:

```bash
devflow skills install
```

This command will:
1. Clone the `claudeai-dev` repository
2. Symlink skills to `~/.claude/skills/` directory
3. Track installed version in `~/.apdevflow/config.json`
4. Verify skills are accessible to Claude Code

**Update skills:**
```bash
devflow skills update
```

This will pull the latest from the skills repo and show a changelog.

---

### Manual (Current)

Until the CLI is built, install skills manually:

```bash
# Clone the skills repository
git clone https://github.com/prillcode/claudeai-dev.git ~/.apdevflow/skills-source

# Symlink agile-skills
ln -s ~/.apdevflow/skills-source/agile-skills ~/.claude/skills/agile-skills

# Symlink dev-skills
ln -s ~/.apdevflow/skills-source/dev-skills ~/.claude/skills/dev-skills

# Verify installation
ls -la ~/.claude/skills/
```

---

## Skills Used by APDevFlow

### 1. epic-feature-creator

**Purpose:** Break down a feature request (or PRD) into technical epics

**Used by:** Product Owners (via Planning Dashboard)

**Execution Mode:** Claude API via Bedrock (centralized)

**Input:**
- Feature title
- Feature description (or uploaded PRD.md)
- Business goals (optional)

**Output:**
- 3-5 epics with descriptions
- Technical breakdown of the feature
- Recommended implementation order

**Link:** [epic-feature-creator](https://github.com/prillcode/claudeai-dev/tree/main/agile-skills/epic-feature-creator)

**How APDevFlow Uses It:**
- Backend Lambda function invokes skill via Bedrock
- System prompt: Full skill instructions from SKILL.md
- User message: Feature request content
- Response parsed into Epic objects stored in DynamoDB

---

### 2. feature-story-creator

**Purpose:** Break down an epic into user stories

**Used by:** Product Owners (via Planning Dashboard)

**Execution Mode:** Claude API via Bedrock (centralized)

**Input:**
- Epic title
- Epic description
- Acceptance criteria (optional)

**Output:**
- 4-8 user stories
- Story descriptions
- Suggested story points
- Acceptance criteria per story

**Link:** [feature-story-creator](https://github.com/prillcode/claudeai-dev/tree/main/agile-skills/feature-story-creator)

**How APDevFlow Uses It:**
- Backend Lambda function invokes skill via Bedrock
- Response parsed into Story objects
- Stories assigned to developers via dashboard
- Exported to JIRA or used standalone

---

### 3. dev-spec

**Purpose:** Generate implementation specification from user story

**Used by:** Developers (via local Claude Code)

**Execution Mode:** Claude Code (local developer execution)

**Input:**
- `.apdevflow/story.md` (exported from dashboard)
- `.apdevflow/context.md` (optional)

**Output:**
- `.apdevflow/spec.md` (implementation specification)
- Technical approach
- File structure
- Testing strategy

**Link:** [dev-spec](https://github.com/prillcode/claudeai-dev/tree/main/dev-skills/dev-spec)

**How APDevFlow Uses It:**
1. Developer runs `devflow start story-123`
2. Story exported to `.apdevflow/story.md`
3. Developer opens Claude Code
4. Developer: "Use dev-spec skill to create specification"
5. Claude Code reads story, generates spec
6. Developer reviews/edits spec
7. Developer runs `devflow finish story-123` to upload

**Why Local?**
- Developers already have Bedrock-backed Claude Code
- Zero API cost for organization
- Developer can iterate with Claude interactively
- Full control over spec generation process

---

### 4. dev-execute

**Purpose:** Implement code from specification

**Used by:** Developers (via local Claude Code)

**Execution Mode:** Claude Code (local developer execution)

**Input:**
- `.apdevflow/spec.md` (generated by dev-spec)
- Existing codebase context

**Output:**
- Implementation files in `src/`
- Tests
- Documentation

**Link:** [dev-execute](https://github.com/prillcode/claudeai-dev/tree/main/dev-skills/dev-execute)

**How APDevFlow Uses It:**
1. After spec is created and reviewed
2. Developer: "Use dev-execute to implement the spec"
3. Claude Code reads spec, generates implementation
4. Developer reviews, runs tests
5. Developer commits code

---

### 5. git-commit-helper

**Purpose:** Generate conventional commit messages from git diff

**Used by:** Developers (via local Claude Code)

**Execution Mode:** Claude Code (local developer execution)

**Input:**
- `git diff HEAD` output

**Output:**
- Properly formatted commit message
- Semantic prefix (feat:/fix:/chore:)
- Detailed description

**Link:** [git-commit-helper](https://github.com/prillcode/claudeai-dev/tree/main/dev-skills/git-commit-helper)

**How APDevFlow Uses It:**
1. After implementation is complete
2. Developer stages changes: `git add .`
3. Developer: "Use git-commit-helper to create commit message"
4. Claude Code analyzes diff, suggests message
5. Developer commits with suggested message

---

## Skill Versioning Strategy

### Phase 1: MVP (Direct Reference)

**Approach:** Reference `main` branch of `claudeai-dev`

```typescript
const SKILLS_REPO = 'https://github.com/prillcode/claudeai-dev.git';
const SKILLS_BRANCH = 'main'; // Or specific commit SHA

await exec(`git clone --branch ${SKILLS_BRANCH} ${SKILLS_REPO} ...`);
```

**Pros:**
- Simple to implement
- Always get latest improvements

**Cons:**
- Could break if skills change incompatibly
- No version locking

---

### Phase 2: Production (Version Locking)

**Approach:** Use git tags for stable releases

```typescript
// In claudeai-dev, tag releases
git tag v1.0.0
git tag v1.1.0
git push --tags

// APDevFlow references specific tag
const SKILLS_VERSION = 'v1.0.0';

await exec(`git clone --branch ${SKILLS_VERSION} ${SKILLS_REPO} ...`);
```

**Stored in config:**
```json
// ~/.apdevflow/config.json
{
  "skills": {
    "repo": "https://github.com/prillcode/claudeai-dev.git",
    "version": "v1.0.0",
    "installedAt": "2025-11-22T10:00:00Z"
  }
}
```

**Update flow:**
```bash
$ devflow skills update

Current version: v1.0.0
Available version: v1.2.0

Changelog:
  v1.2.0:
    - dev-spec: Improved test generation
    - dev-execute: Better error handling
  v1.1.0:
    - epic-feature-creator: Added story point estimates

Update to v1.2.0? [Y/n]
```

---

### Future: npm Package (Optional)

If skills become widely adopted, consider publishing as npm package:

```bash
npm publish @apdevsolutions/claude-skills
```

Then APDevFlow can use standard npm versioning:

```json
// package.json
{
  "dependencies": {
    "@apdevsolutions/claude-skills": "^1.2.0"
  }
}
```

**Pros:**
- Standard JavaScript ecosystem
- Semantic versioning
- Easy dependency management

**Cons:**
- Skills are markdown files, not JS/TS (awkward fit)
- Requires publishing infrastructure
- Most Claude Code skills aren't npm packages

**Recommendation:** Stick with git-based approach for now.

---

## Skill Adaptation for Claude API

Some skills (epic-feature-creator, feature-story-creator) are invoked via Bedrock API, not locally via Claude Code.

### Adaptation Required

**Original Skill (Claude Code):**
```markdown
# SKILL.md

## Instructions
1. Read the epic from `epic.md`
2. Generate user stories
3. Write stories to `stories.md`
```

**Adapted for API:**
```typescript
// Backend Lambda
const skillPrompt = await loadSkill('feature-story-creator');

// Remove file I/O instructions
const apiSkillPrompt = adaptSkillForAPI(skillPrompt);

// Invoke Bedrock
const response = await bedrock.invokeModel({
  modelId: 'anthropic.claude-sonnet-4-5-v2',
  body: {
    system: apiSkillPrompt,
    messages: [{
      role: 'user',
      content: `Epic:\n\n${epicContent}`
    }]
  }
});
```

**Key Changes:**
- Input comes from message content, not file reads
- Output returned as text, not file writes
- Core logic remains identical

See [CLAUDE-INTEGRATION.md](CLAUDE-INTEGRATION.md) for full details.

---

## Contributing to Skills

Skills are maintained in the [claudeai-dev](https://github.com/prillcode/claudeai-dev) repository.

To improve skills:
1. Fork `claudeai-dev`
2. Make improvements to skill SKILL.md
3. Test with Claude Code locally
4. Submit pull request
5. If merged, APDevFlow will pick up improvements on next `devflow skills update`

---

## Troubleshooting

### Skills not found in Claude Code

**Problem:** Claude Code doesn't see installed skills

**Solution:**
```bash
# Verify symlinks
ls -la ~/.claude/skills/

# Should see:
# agile-skills -> /path/to/skills-source/agile-skills
# dev-skills -> /path/to/skills-source/dev-skills

# If missing, reinstall
devflow skills install
```

---

### Skill version mismatch

**Problem:** APDevFlow expects different skill format

**Solution:**
```bash
# Check installed version
devflow skills version

# Update to latest compatible version
devflow skills update

# Or rollback to specific version
devflow skills install --version v1.0.0
```

---

### Skill execution fails

**Problem:** Skill errors when invoked

**Solution:**
1. Check skill prerequisites (codebase structure, required files)
2. Review skill documentation in claudeai-dev repo
3. Test skill manually in Claude Code outside APDevFlow
4. Report issue to claudeai-dev repo if skill bug

---

## FAQ

**Q: Can I use my own skills instead of the ones from claudeai-dev?**

A: Yes! You can:
1. Fork `claudeai-dev` and modify skills
2. Point APDevFlow to your fork in config
3. Or symlink your custom skills to `~/.claude/skills/`

**Q: What if a skill breaks in a new version?**

A: APDevFlow config locks to a specific version. You control when to update:
```bash
devflow skills update  # Opt-in update
```

**Q: Can I contribute skills back to claudeai-dev?**

A: Absolutely! PRs welcome at https://github.com/prillcode/claudeai-dev

**Q: Do I need all skills installed?**

A: No, only install what you need:
- POs only: No local skills needed (API mode)
- Developers: Install dev-spec, dev-execute, git-commit-helper
- Full workflow: Install all skills

---

## Related Documentation

- [Claude Integration Strategy](CLAUDE-INTEGRATION.md) - Deep dive on execution modes
- [Git Worktrees Integration](GIT-WORKTREE-STRAT.md) - Developer workflows
- [Product Requirements Document](APP-PRD-Revised.md) - Full APDevFlow architecture

---

**Skills Repository:** https://github.com/prillcode/claudeai-dev
**APDevFlow Repository:** https://github.com/prillcode/apdevflow
